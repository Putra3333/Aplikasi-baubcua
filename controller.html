<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Controller Hewan</title>
  <style>
    body { font-family:sans-serif; background:#222; color:#fff; display:flex; justify-content:center; padding:20px; }
    .panel { background:#333; padding:20px; border-radius:12px; width:320px; text-align:center; }
    .animals { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; margin-bottom:15px; }
    .animal { font-size:36px; background:#555; border-radius:10px; padding:10px; cursor:pointer; }
    .animal.active { background:#00cc66; }
    button { padding:10px 15px; margin:5px; border:none; border-radius:6px; cursor:pointer; font-weight:bold; }
    .primary { background:#007bff; color:#fff; }
    .danger { background:#cc0000; color:#fff; }
    .chosen { margin-top:10px; font-size:24px; }
  </style>
</head>
<body>
  <div class="panel">
    <h2>Kontrol Hewan</h2>
    <div class="animals" id="animals">
      <div class="animal" data-h="🦌">🦌</div>
      <div class="animal" data-h="🍶">🍶</div>
      <div class="animal" data-h="🐓">🐓</div>
      <div class="animal" data-h="🐟">🐟</div>
      <div class="animal" data-h="🦀">🦀</div>
      <div class="animal" data-h="🦐">🦐</div>
    </div>
    <div class="chosen" id="chosen">Pilihan: -</div>
    <div>
      <button class="primary" id="btnShow">Pakai Pilihan</button>
      <button class="danger" id="btnClear">Bersihkan Pilihan</button>
    </div>
  </div>

  <script>
    const animals = document.querySelectorAll('.animal');
    const channel = new BroadcastChannel("hewan-channel");
    let selected = [];

    function updateChosen(){
      document.getElementById("chosen").textContent = 
        "Pilihan: " + (selected.length ? selected.join(" ") : "-");
    }

    animals.forEach(a => {
      a.addEventListener('click', () => {
        if (selected.length < 3) {
          selected.push(a.dataset.h);
          a.classList.add('active');
        } else {
          alert("Maksimal 3 hewan. Bersihkan dulu kalau mau ubah.");
        }
        updateChosen();
      });
    });

    document.getElementById("btnShow").onclick = () => {
      if (selected.length !== 3) {
        alert("Harus pilih tepat 3 hewan!");
        return;
      }
      channel.postMessage({ type:"show", hewan: [...selected] });
    };

    document.getElementById("btnClear").onclick = () => {
      selected = [];
      animals.forEach(a => a.classList.remove('active'));
      updateChosen();
    };

    updateChosen();
  </script>
</body>
</html>